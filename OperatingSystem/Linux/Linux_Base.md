# Linux_Base

---- Chime Lee

## 一、概述



## 二、内容

### 2.1 Linux系统重进程默认栈空间是多大？如何修改？

Linux系统中，进程默认栈大小由**操作系统内核**设置，通常是8MB。

修改命令：

```bash
# 单位KB
ulimit -s <stack_size>
```

### 2.2 用户空间于内核通信方式有哪些？

* 系统调用：读写文件，创建进程等。
* 文件接口：通过文件接口**读写文件**与内核进行通信。
* proc下文件：读写/proc文件系统的特定文件与内核通信，查询或修改**内核状态和信息**。
* sys_fs：读写/sys文件系统中文件与内核通信，查询或修改**设备属性和参数**。
* netlink套接字：通过netlink套接字与内核通信，用于**网络配置，管理**等。
* 共享内存：映射共享内存区域来读写数据，实现高效数据交换。
* 设备文件：打开读写设备文件与内核进行通信，如**串口设备、字符设备**。

### 2.3 Linux下检查内存状态的命令

* `free`：查询系统内存的使用情况，总内存，已使用内存，可用内存等。
* `top`：系统的整体资源使用情况，显示每个进程使用内存的情况。
* `vmstat`：虚拟内存统计信息，使用情况，交换情况。
* `/proc/meminfo`文件：系统内存的详细信息。
* `pmap`：线程进程内存映射的详细信息，内存地址，权限，映射文件。

### 2.4 自旋锁和互斥锁的使用场景

自旋锁（Spin Lock）和互斥锁（Mutex Lock）常见的线程同步机制。

| 类型     | 自旋锁                                 | 互斥锁               |
| -------- | -------------------------------------- | -------------------- |
| 等待方式 | 忙等待，一直循环检查锁状态，直到获得锁 | 阻塞等待             |
| 适用场景 | 时间占用短或竞争不激烈                 | 临界区较长或竞争激烈 |
| 切换方式 | 不涉及上下文切换，多核处理器上表现更好 | 需要进行上下文切换   |

### 2.5 线程池的设计思路



### 2.6 Linux的fork的作用？

* fork是一个系统调用，用于创建新的进程。
* 创建的子进程会有独立代码路径，可以执行不同的操作。子进程也可以创建新的进程，实现层级关系。
* 返回值不同：每个进程都有独立的进程ID，子进程创建时，父进程会将独立的进程ID赋予子进程。父进程中返回的子进程的ID，子进程的返回值是0。
* 资源继承：子进程会继承父进程的绝大部分属性，代码、数据、堆栈、进程上下文、打开的文件、环境变量、当前工作目录。
* 生命周期：父进程和子进程的生命周期是独立的，父进程先消亡，子进程是孤儿进程，由init进程回收。若子进程消亡，但父进程为等待销毁，则为僵尸进程。