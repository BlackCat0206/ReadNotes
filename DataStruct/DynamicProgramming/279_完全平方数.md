# 279_完全平方数

---- Lee

## 一、题目

给你一个整数 `n` ，返回 *和为 `n` 的完全平方数的最少数量* 。

**完全平方数** 是一个整数，其值等于另一个整数的平方；换句话说，其值等于一个整数自乘的积。例如，`1`、`4`、`9` 和 `16` 都是完全平方数，而 `3` 和 `11` 不是。

**示例 1：**

```
输入：n = 12
输出：3 
解释：12 = 4 + 4 + 4
```

**示例 2：**

```
输入：n = 13
输出：2
解释：13 = 4 + 9
```

**提示：**

- `1 <= n <= 104`

## 二、思路

总体思路类似于：[322_零钱兑换.md](./322_零钱兑换.md)

**动态规划五部曲**：

* **确认`dp`数组以及下标`j`的含义**：`dp[j]`表示和为`j`的完全平方数的最少数量。
* **推导公式**：`dp[j] = min(dp[j], dp[j - i*i] + 1);`
  * **考虑当前元素`i`**：`j`减去当前i的平方和所需最少数量为`dp[j - i*i]`，那么`dp[j] = dp[j - i *i] + 1`
  * **不使用当前元素的已有元素**：`dp[j]`
  * **`dp[j]`取二者最小值**：`dp[j] = min(dp[j], dp[j - i*i] + 1);`
* **确认如何初始化：**
  * `dp[0] = 0;`
  * `dp[j] = n + 1`，使用最多数量就是用1来组合，数字n最多用n个1，用n+1做限制。
* **如何遍历：**
  * 第一层遍历`[1:n]`
  * 第二层遍历`[1:i*i <= j]`
* **推导：n = 12**

| j    | i             | `dp`                                        |
| ---- | ------------- | ------------------------------------------- |
| 1    | 1             | 1                                           |
| 2    | 1             | **2**                                       |
| 2    | 2*2 > 2不执行 | 2                                           |
| 3    | 1             | **3**                                       |
| 4    | 1             | 4                                           |
| 4    | 2             | `dp[4 -4] + 1 = dp[0] + 1 = 1`              |
| 5    | 1             | **2**                                       |
| 5    | 2             | `dp[5 - 4]+1 = 2`                           |
| 6    | 1             | `dp[6 - 1] + 1 = 2 + 1 = 3`                 |
| 6    | 2             | **`dp[6 -4] + 1 = 2 +1 = 3`**               |
| 7    | 1             | `dp[7 -1] + 1 = dp[6] + 1 = 4`              |
| 7    | 2             | **`dp[7 - 4] + 1 = dp[3] + 1 = 3 + 1 = 4`** |
| 8    | 1             | 5                                           |
| 8    | 2             | **2**                                       |
| 9    | 1             | 3                                           |
| 9    | 2             | 3                                           |
| 9    | 3             | **1**                                       |
| 10   | 1             | 2                                           |
| 10   | 2             | 4                                           |
| 10   | 3             | **2**                                       |
| 11   | 1             | 3                                           |
| 11   | 2             | 5                                           |
| 11   | 3             | **3**                                       |
| 12   | 1             | 4                                           |
| 12   | 2             | **3**                                       |
| 12   | 3             | 4                                           |

## 三、代码

```cpp
class Solution {
public:
    int numSquares(int n) {
         if (1 == n){
            return 1;
         }
         vector<int> dp(n + 1, n + 1);
         dp[0] = 0;

         for (int j = 1; j <= n; ++j){
            for (int i = 1; i*i <= j; ++i){
                dp[j] = min(dp[j], dp[j - i*i] + 1);
            }
         }

         return dp[n];
    }
};
```

- 时间复杂度: O(n * √n)
- 空间复杂度: O(n)