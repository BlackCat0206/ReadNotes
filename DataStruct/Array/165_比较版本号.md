# 165_比较版本号

---- Lee

## 一、题目

给你两个 **版本号字符串** `version1` 和 `version2` ，请你比较它们。版本号由被点 `'.'` 分开的修订号组成。**修订号的值** 是它 **转换为整数** 并忽略前导零。

比较版本号时，请按 **从左到右的顺序** 依次比较它们的修订号。如果其中一个版本字符串的修订号较少，则将缺失的修订号视为 `0`。

返回规则如下：

- 如果 `*version1* < *version2*` 返回 `-1`，
- 如果 `*version1* > *version2*` 返回 `1`，
- 除此之外返回 `0`。

**示例 1：**

**输入：**version1 = "1.2", version2 = "1.10"

**输出：**-1

**解释：**

version1 的第二个修订号为 "2"，version2 的第二个修订号为 "10"：2 < 10，所以 version1 < version2。

**示例 2：**

**输入：**version1 = "1.01", version2 = "1.001"

**输出：**0

**解释：**

忽略前导零，"01" 和 "001" 都代表相同的整数 "1"。

**示例 3：**

**输入：**version1 = "1.0", version2 = "1.0.0.0"

**输出：**0

**解释：**

version1 有更少的修订号，每个缺失的修订号按 "0" 处理。

**提示：**

- `1 <= version1.length, version2.length <= 500`
- `version1` 和 `version2` 仅包含数字和 `'.'`
- `version1` 和 `version2` 都是 **有效版本号**
- `version1` 和 `version2` 的所有修订号都可以存储在 **32 位整数** 中

## 二、思路

* 一起遍历两个字符串，记录每个'.'之前转换的数字并比较。

```cpp
while (begin1 <= end1 && begin2 <= end2)
```

* 清空上一次记录的数据

```cpp
num1 = 0, num2 = 0;
```

* 在边界内，遍历字符，转换为整数。超出边界或者遇到'.'停止

```cpp
// 获取version1的当前版本号
while(ver1Begin <= ver1End && version1[ver1Begin] != '.')
{
    num1 = num1*10 + (version1[ver1Begin++] - '0');
}

// 获取version2的当前版本号
while (ver2Begin <= ver2End && version2[ver2Begin] != '.')
{
    num2 = num2*10 + (version2[ver2Begin++] - '0');
}
```

* 对结果进行比较

```cpp
if (num1 > num2)
{
    return 1;
}
else if (num1 < num2)
{
    return -1;
}
```

* 比较后，跳过当前的'.'

```cpp
++ver1Begin;
++ver2Begin;
```

* 对于较长的字符串，进行单独处理。

```cpp
        // 处理较长的version1
        while (ver1Begin <= ver1End)
        {
            num1 = 0;
            while (ver1Begin <= ver1End && version1[ver1Begin] != '.')
            {
                num1 = num1*10 + (version1[ver1Begin++] - '0');
            }

            if (num1 > 0)
            {
                return 1;
            }
            ++ver1Begin;
        }

        // 处理较长的version2
        while (ver2Begin <= ver2End)
        {
            num2 = 0;
            while(ver2Begin <= ver2End && version2[ver2Begin] != '.')
            {
                num2 = num2 * 10 + (version2[ver2Begin++] - '0');
            }

            if (num2 > 0)
            {
                return -1;
            }
            ++ver2Begin;
        }
```

* 都无问题返回0

## 三、代码

```cpp
class Solution {
public:
    int compareVersion(string version1, string version2) {
        int ver1Begin = 0;
        int ver2Begin = 0;
        int ver1End = version1.size() - 1;
        int ver2End = version2.size() - 1;
        long num1 = 0;
        long num2 = 0;
        while (ver1Begin <= ver1End && ver2Begin <= ver2End)
        {
            // 进入下一个版本号比较，情况
            num1 = 0;
            num2 = 0;
            
            // 获取version1的当前版本号
            while(ver1Begin <= ver1End && version1[ver1Begin] != '.')
            {
                num1 = num1*10 + (version1[ver1Begin++] - '0');
            }

            // 获取version2的当前版本号
            while (ver2Begin <= ver2End && version2[ver2Begin] != '.')
            {
                num2 = num2*10 + (version2[ver2Begin++] - '0');
            }

            if (num1 > num2)
            {
                return 1;
            }
            else if (num1 < num2)
            {
                return -1;
            }
			// 注意这里的递增，跳过'.'
            ++ver1Begin;
            ++ver2Begin;
        }

        // 处理较长的version1
        while (ver1Begin <= ver1End)
        {
            num1 = 0;
            while (ver1Begin <= ver1End && version1[ver1Begin] != '.')
            {
                num1 = num1*10 + (version1[ver1Begin++] - '0');
            }

            if (num1 > 0)
            {
                return 1;
            }
            // 注意这里的递增，跳过'.'
            ++ver1Begin;
        }

        // 处理较长的version2
        while (ver2Begin <= ver2End)
        {
            num2 = 0;
            while(ver2Begin <= ver2End && version2[ver2Begin] != '.')
            {
                num2 = num2 * 10 + (version2[ver2Begin++] - '0');
            }

            if (num2 > 0)
            {
                return -1;
            }
            // 注意这里的递增，跳过'.'
            ++ver2Begin;
        }

        return 0; 
    }
};
```

